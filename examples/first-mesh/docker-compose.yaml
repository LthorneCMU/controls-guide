version: '3'

services:

  rabbit-broker:
    image: rabbitmq:3-management
    environment:
      - RABBITMQ_DEFAULT_USER=dripline
      - RABBITMQ_DEFAULT_PASS=dripline

  key-value-store:
    image: driplineorg/dripline-python:develop_dl3-amd64
    depends_on:
      - rabbit-broker
    volumes:
      - ./authentications.json:/root/authentications.json
      - ./key-value-store.yaml:/root/key-value-store.yaml
    command:
      - dl-serve
      - -c
      - /root/key-value-store.yaml
